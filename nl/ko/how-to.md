---

copyright:
  years: 2017, 2018
lastupdated: "2018-03-06"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}

# CDN 관리

다음 가이드라인을 따라 CDN 구성을 관리하는 방법을 알아보십시오.

## 실행 중인 상태로 CDN 가져오기

CDN을 작성하면 CDN 대시보드에 즉시 표시됩니다. 여기서 CDN의 이름, 원본, 제공자 및 상태를 볼 수 있습니다.  

 ![맵핑 목록 스크린샷](images/mapping_list_cname.png)

**단계 1:**

CDN을 주문한 후에는 DNS 제공자를 사용하여 **CNAME**을 구성해야 합니다. 대부분의 DNS 제공자는 CNAME 설정 또는 변경에 대한 지시사항을 제공할 수 있습니다.

   * 이 기간 동안 CDN의 상태는 **CNAME Configuration**으로 표시됩니다. 변경사항이 적용되는 시기를 알아보려면 DNS 제공자에게 문의하십시오.

   ![CNAME 구성](images/cname-config.png)  

**단계 2:**  

DNS 제공자를 사용하여 CNAME을 구성한 후에는 언제든지 CDN 상태의 오른쪽에 있는 오버플로우 메뉴에서 **가져오기 상태**를 선택하여 상태를 확인할 수 있습니다.

  ![CNAME getStatus](images/cname-getstatus.png)  

**단계 3:**  

CNAME 변경이 완료되면 계정 상태는 *RUNNING*으로 변경되고 CDN을 사용할 수 있습니다.

완료되었습니다! CDN은 이제 실행 중입니다.  

## CDN 중지
'Running' 상태인 경우에만 CDN을 중지할 수 있습니다.

**단계 1:**  

오버플로우 메뉴(CDN 상태의 오른쪽에 수직으로 된 세 개의 점)에서 'CDN 중지'를 클릭하십시오.
 ![오버플로우 메뉴](images/stop_cdn.png)

**단계 2:**  

서비스를 중지할 것인지 확인하는 대형 대화 상자 창이 표시됩니다. 진행하려면 **확인**을 선택하십시오.

**단계 3:**  

약 5 - 15초 후에 상태를 'Stopped'으로 변경해야 합니다.


## CDN 시작
'Stopped' 상태인 경우에만 CDN을 시작할 수 있습니다.  

**단계 1:**  

CDN 행의 오른쪽에 세 개의 점으로 표시되는 오버플로우 메뉴에서 'CDN 시작'을 클릭하십시오.
 ![오버플로우 메뉴](images/start_cdn.png)

**단계 2:**  

서비스를 시작할지 확인하는 대형 대화 상자 창이 표시됩니다. 진행하려면 **확인**을 선택하십시오.

**단계 3:**  

조치가 성공적이면 화면의 오른쪽 상단 모서리에 시간 정보와 함께 사용자에게 성공했음을 알려주는 대화 상자가 표시됩니다.

**단계 4:**  

이 단계에서는 상태가 'CNAME Configuration'으로 변경됩니다.

**단계 5:**  

오버플로우 메뉴에서 '가져오기 상태'를 클릭하십시오. 이 단계에서는 상태가 'Running'으로 변경됩니다. CDN이 작동 가능하게 됩니다.

## CDN 삭제

CDN을 삭제하려면 다음 단계를 수행하십시오.

**참고**: 오버플로우 메뉴에서 `delete`를 선택하면 CDN만 삭제됩니다. 계정은 삭제되지 않습니다.

**단계 1:**  

오버플로우 메뉴에서 '삭제'를 클릭하십시오.

 ![CDN 오버플로우 메뉴 삭제](images/delete_cdn.png)

**단계 2:**  

삭제할지 확인하는 대형 대화 상자 창이 표시됩니다. 진행하려면 **삭제**를 클릭하십시오.

**단계 3:**  

이 단계에서는 상태가 'Deleting'으로 변경됩니다. 오버플로우 메뉴에서 '상태 가져오기'를 클릭하고 CDN 목록에서 행을 제거하십시오.

## "TTL(Time To Live)"을 사용하여 컨텐츠 캐싱 설정

CDN이 실행된 후 TTL(Time To Live)을 사용하여 컨텐츠 캐싱 시간을 설정할 수 있습니다. 특정 파일 또는 디렉토리 경로의 TTL(Time To Live)은 컨텐츠가 캐싱되어야 하는 기간을 표시합니다. CDN 맵핑을 작성한 경우 3,600초의 기본 글로벌 TTL이 작성되었습니다.

**단계 1:**  

CDN 페이지에서 **개요** 페이지로 이동할 수 있도록 CDN을 선택하십시오.

**단계 2:**  

화살표를 사용하거나 새 시간을 입력하여 시간을 조정할 수 있습니다. 시간 값은 초로 지정됩니다. 예를 들어, 3,600초는 1시간과 같습니다. `timeToLive`에 선택할 수 있는 가장 작은 값은 30초이고, 가장 큰 값은 2,147,483,647초입니다. 컨텐츠 캐싱 시간을 설정하려면 **저장** 단추를 선택하십시오.

  ![TTL 추가](images/adding-path.png)

**단계 3:**

저장 후 오버플로우 메뉴 옵션을 사용하여 TTL 설정을 **편집** 또는 **삭제**할 수 있습니다. (**참고**: TTL의 경로를 변경할 수 없습니다. 맵핑 경로가 변경되면 TTL 경로가 자동으로 업데이트됩니다.)

  ![TTL 편집 또는 삭제](images/edit-delete-ttl-setting.png)  

  * 컨텐츠가 다중 규칙과 일치하면 가장 최근에 추가된 구성이 우선합니다.

  * 특정 파일 이름 또는 디렉토리에 대한 TTL 값만 설정할 수 있습니다. 정규식으로 예상치 못한 동작이 발생할 수 있으므로 정규식은 지원되지 않습니다.

## 원본 경로 세부사항 추가

CDN의 상태가 *CNAME_Configuration* 또는 *Running*인 경우 원본 경로 세부사항을 추가할 수 있습니다. 다중 원본 서버에서 컨텐츠를 제공하도록 선택할 수 있습니다. 예를 들어, 비디오와 다른 서버에서 사진을 전달할 수 있습니다. 원본은 호스트 서버 또는 오브젝트 스토리지를 기반으로 할 수 있습니다.

**참고:** CDN이 원본 서버에 대해 URL 변환을 하게 됩니다. 예를 들어, 사용자가 URL `www.example.com/example/*`를 열 때 원본 `xyz.example.com`이 경로 `/example/*`과 함께 추가되는 경우 CDN 에지 서버는 `xyz.example.com/*`에서 컨텐츠를 검색합니다.

**단계 1:**  

CDN 페이지에서 **개요** 페이지로 이동할 수 있도록 CDN을 선택하십시오.  

**단계 2:**  

**원본** 탭을 선택한 후 **원본 추가** 단추를 선택하십시오. 이 단계에서는 새 대화 상자 창을 열며, 이 창에서 원본을 구성할 수 있습니다.  

   ![원본 추가 원본](images/add-origins.png)

**단계 3:**  

경로를 *제공해야* 합니다. CDN이 경로와 함께 작성된 경우, 경로가 접두부로서 CDN 경로로 시작*해야* 합니다.  
  예를 들어, CDN이 `/examplePath`의 경로와 함께 작성된 경우, 원본의 경로는 접두부 `/examplePath/`로 시작해야 합니다. 선택적으로 호스트 헤더를 제공할 수 있습니다.  
  
   ![원본 추가 원본](images/add-origin-path.png)

**단계 4:**  

**서버** 또는 **오브젝트 스토리지** 중 하나를 선택하십시오.

  * **서버**를 선택한 경우, IPv4 주소로 원본 서버 주소 또는 _호스트 이름_을 입력하십시오. 호스트 이름을 제공하고 완전한 도메인 이름(FQDN)을 제공하는 것이 좋습니다. CDN 작성 시 선택한 프로토콜에 따라 HTTP 포트, HTTPS 포트 또는 둘 다 제공하십시오. HTTPS 포트를 사용하는 경우 원본 서버 주소는 IP 주소가 아닌 _호스트 이름_**이어야 합니다**.
  
       ![원본 서버 추가](images/add-origin-server-default.png)

  * **오브젝트 스토리지**를 선택한 경우 엔드포인트, 버킷 이름 및 HTTPS 포트를 제공하십시오. 선택적으로, CDN 서비스에 사용할 수 있는 파일 확장자를 지정하십시오. 아무 것도 지정되지 않으면 모든 파일 확장자가 허용됩니다.
  
       ![원본 오브젝트 스토리지 추가](images/add-origin-object-storage.png)

  * **최적화** 및 **캐시 키** 옵션은 서버 및 오브젝트 스토리지 구성에 대해 동일합니다.
  
    * 드롭 다운 메뉴에서 **최적화** 옵션을 선택하십시오. **일반 웹 전달**은 기본 옵션이며, **대형 파일** 또는 **VoD(Video on demand)** 최적화를 선택할 수도 있습니다. **일반 웹 전달**을 사용하면 CDN이 최대 1.8GB의 컨텐츠를 제공할 수 있는 반면, **대형 파일** 최적화를 사용하면 1.8GB에서 320GB까지의 파일을 다운로드할 수 있습니다. **VoD(Video on demand)**는 세그먼트화된 스트리밍 형식의 전달을 위해 CDN을 최적화합니다. [대형 파일 최적화](about.html#large-file-optimization-) 및 [VoD(Video on Demand)](about.html#video-on-demand-)에 대한 기능 설명은 추가 정보를 제공합니다.
    
        ![성능 구성 옵션](images/performance-config-options.png)
    
    * 드롭 다운 메뉴에서 **캐시 키** 옵션을 선택하십시오. 기본 옵션은 **Include-all**입니다. **Include specified** 또는 **Ignore specified**를 선택하면 포함하거나 무시할 조회 문자열을 쉼표로 구분하여 입력**해야 합니다**. 예를 들어, 단일 조회 문자열의 경우에는 `uuid=123456`을 입력하고 두 조회 문자열의 경우에는 `uuid=123456 issue=important`를 입력하십시오. 기능 설명에서 [캐시 키 조회 인수](about.html#ignore-query-args-in-cache-key-feature-)에 대해 자세히 알아볼 수 있습니다.
    
        ![캐시 키 옵션](images/cache-key-options.png)
    
**참고**: UI에 표시되는 프로토콜 및 포트 옵션은 CDN 주문 시 선택한 사항과 일치합니다. 예를 들어, **HTTP 포트**를 CDN 주문의 일부로 선택한 경우 **HTTP 포트** 옵션만 원본 추가의 일부로 표시됩니다.

**단계 5:**  

**추가** 단추를 선택하여 원본 경로를 추가하십시오.

  **참고**: 오브젝트 스토리지 원본 경로에 대한 파일 확장자를 제공하는 경우 원본 경로와 동일한 URL이 있는 TTL 설정은 지정된 파일 확장자가 있는 모든 파일을 포함하도록 범위가 지정됩니다. 예를 들어, `/example`의 원본 경로를 작성하고 "jpg png gif"의 파일 확장자를 지정하면 TTL 경로 `/example`의 TTL 값 범위는 `/example` 디렉토리 및 하위 디렉토리 아래에 있는 모든 JPG/PNG/GIF 파일을 포함합니다.

**단계 6:**  

추가 후 오버플로우 메뉴 옵션을 사용하여 원본을 **편집** 또는 **삭제**할 수 있습니다.

  ![원본 편집 또는 삭제](images/edit-delete-origin.png)

## 캐싱된 컨텐츠 제거

CDN이 실행된 후 벤더의 서버에서 캐싱된 컨텐츠를 제거할 수 있습니다.  

**단계 1:**  

CDN 페이지에서 **개요** 페이지로 이동할 수 있도록 CDN을 선택하십시오.

**단계 2:**  

**제거** 탭을 선택하십시오.

   ![페이지 제거](images/purge_tab.png)

**단계 3:**  

제거할 파일을 표시하도록 표준 Unix 경로 구문을 입력한 후 **제거** 단추를 선택하십시오. 이 때 제거는 단일 파일에만 허용됩니다.

**단계 4:**  

제거 후 활동은 **제거 활동** 아래에 나열됩니다. 오버플로우 메뉴 옵션을 사용하여 경로에 대해 **제거 다시 실행** 또는 **즐겨찾기 추가**를 수행할 수 있습니다.

   ![제거 활동](images/purge-activity.png)

   **참고:** 16개 이상의 제거 항목이 있는 경우 제거 활동은 자동으로 15분마다 축소됩니다.

## CDN 구성 세부사항 업데이트

CDN이 실행된 후 CDN 구성 세부사항을 업데이트할 수 있습니다.

**단계 1:**

CDN 페이지에서 **개요** 페이지로 이동할 수 있도록 CDN을 선택하십시오.

**단계 2:**  

**설정** 탭을 선택하십시오. CDN 구성 세부사항이 표시됩니다.

   ![설정 탭](images/settings-tab.png)

  **서버**의 경우 다음 필드를 변경할 수 있습니다.
   * 호스트 헤더
   * 원본 서버 주소
   * HTTP/HTTPS 포트
   * 시간이 경과된(stale) 컨텐츠 제공
   * 헤더 준수
   * 최적화 옵션
   * 캐시 조회

  **오브젝트 스토리지**의 경우 다음 필드를 변경할 수 있습니다.
   * 호스트 헤더
   * 엔드포인트
   * 버킷 이름
   * HTTPS 포트
   * 허용되는 파일 확장자
   * 시간이 경과된(stale) 컨텐츠 제공
   * 헤더 준수
   * 최적화 옵션
   * 캐시 조회

**단계 3:**  

필요한 경우 **원본** 또는 **기타 옵션** 세부사항을 업데이트한 후 오른쪽 모서리 하단의 **저장** 단추를 클릭하여 CDN 구성 세부사항을 업데이트하십시오.

   ![저장 단추](images/save-button.png)


## CDN에 대한 IBM Cloud Object Storage 구성

IBM Cloud Object Storage에 저장된 오브젝트를 사용하려면 버킷에서 각 오브젝트에 대한 "public-read" 액세스의 "acl" 특성(즉, 액세스 제어 목록) 값을 설정해야 합니다.

필요한 클라이언트 또는 도구를 설치하려면 IBM Cloud Object Storage Developer Center(https://developer.ibm.com/cloudobjectstorage/) 의 Tools 섹션을 참조하십시오. 여기서는 IBM Cloud Object Storage S3 API와 호환 가능한 공식 AWS 명령행 인터페이스를 설치했다고 가정합니다.

다음 예제 코드는 명령행 인터페이스를 사용하여 버킷에서 모든 오브젝트에 대한 "public-read" 액세스를 설정하는 방법을 표시합니다.

```
$ export ENDPOINT="YOUR_ENDPOINT"
$ export BUCKET="YOUR_BUCKET"
$ KEYS=( "$(aws --endpoint-url "$ENDPOINT" s3api list-objects --no-paginate --query 'Contents[].{key: Key}' --output text --bucket "$BUCKET")" )
$ for KEY in "${KEYS[@]}"
  > do
  >   aws --endpoint-url "$ENDPOINT" s3api put-object-acl --bucket "$BUCKET" --key "$KEY" --acl "public-read"
  > done
```
