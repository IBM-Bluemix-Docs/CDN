---

copyright:
  years: 2017, 2018
lastupdated: "2018-03-29"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}

# よくある質問

## コンテンツ配信ネットワーク (CDN) とは何ですか

コンテンツ配信ネットワーク (CDN) は、全国または世界中に分散されたエッジ・サーバーの集合です。その Web コンテンツは、要求元のユーザーに最も近い地理的領域にあるエッジ・サーバーから提供されます。 この技法を使用すると、1 カ所の集中管理された場所からコンテンツを配信する場合に比べて、ユーザーはより短い遅延でコンテンツを受け取ることができます。 これにより、カスタマー・エクスペリエンス全体が改善されます。

## コンテンツ配信ネットワーク (CDN) はどのように動作しますか

CDN は、世界中のエッジ・サーバー上に Web コンテンツをキャッシュすることで、その目的を果たします。ユーザーが Web コンテンツを要求すると、そのユーザーに地理的に最も近いエッジ・サーバーに、コンテンツ要求がルーティングされます。 CDN では、コンテンツの必要移動距離を削減することで、スループットの最適化、最小限の遅延、パフォーマンスの向上が実現されます。 

## IBM Cloud コンテンツ配信ネットワーク・サービスのアカウントはどのように作成されますか

CDN の注文処理時に、「ベンダーの選択 (Vendor selection)」メニューにナビゲートした後で**「選択」**をクリックすると、ご使用のアカウントが作成されます。

## CDN が CNAME_CONFIGURATION 状況の場合は何をすればよいのですか

HTTP ベースの CDN では、ご使用の Web サイトが新規 CDN マッピングに関連付けられた `CNAME` を指すように、DNS レコードを更新してください。HTTPS ベースの CDN では、この DNS の更新は必要**ありません**。

**注**: 更新がアクティブになるまでに 15 分から 30 分かかることがあります。 DNS プロバイダーに確認して、正確な推定時刻を入手してください。

## 支払いの請求対象は何ですか

IBM Cloud コンテンツ配信ネットワークの各インスタンスで使用された帯域幅のみが請求対象となります。ご使用の CDN で帯域幅が使用されていない場合、料金は発生しません。 帯域幅の価格は、エッジ・サーバーの地域によって異なります。地理的領域別の帯域幅の料金は、このサービスの[はじめに](https://github.com/IBM-Bluemix-Docs/CDN/blob/master/getting-started.md#pricing-shown-in-usd)セクションで確認できます。

## 請求時期はいつですか

IBM Cloud コンテンツ配信ネットワークの請求処理は、{{site.data.keyword.BluSoftlayer_notm}} アカウントで設定された請求対象期間に従って実施されます。

## メトリックおよび使用量はどのように表示されますか

メトリックと使用量は、**「概要」**ページに表示されます。このページには、ご使用の CDN を**「コンテンツ配信ネットワーク」**ページから選択することで到達できます。 **注**: CDN の作成後、メトリックが表示されるまでに最大 48 時間かかることがあります。

## CDN を作成した後、CDN を使用するデータ・トラフィックがありました。メトリックが表示されないのはなぜですか

CDN の作成後、メトリックが表示されるまでに 48 時間かかります。

## メトリックを表示できる最低日数がありますか。 最大日数もありますか。

IBM Cloud Content Delivery Network with Akamai を使用してメトリックを表示する場合、表示できる最小日数と最大日数があります。メトリックは、最低 7 日間収集できます。 メトリックは、最大 90 日間表示できます。 API をご使用のお客様は、タイム・ゾーン間の時差を考慮して、最大として 89 日を使用することをお勧めします。

## 合計ヒット数がゼロのときに、ヒット率がゼロでないのはなぜですか。
ヒット率は、コンテンツがオリジン・サーバーから配信されるのではなく、エッジ・サーバー・キャッシュから配信された回数の比率を表します。 次のように計算されます。

```
((エッジ・ヒット数 - 入口ヒット数)/エッジ・ヒット数) * 100

ここで、
エッジ・ヒット数とは、「エンド・ユーザーからエッジ・サーバーへのすべてのヒット数」として定義されます。入口ヒット数とは、「オリジンまたは入口ヒット数は、オリジンから Akamai エッジ・サーバーへのトラフィックに関するもの」として定義されます。
```
 
ヒット率は、CDN 単位ではなくアカウント・レベルで計算されるため、ヒット率はアカウント内のすべての CDN で同じになります。この事実からも、特定の CDN のエッジ・ヒット数がゼロのときにヒット率がゼロでない場合がある理由を説明できます。

## CDN のオーバーフロー・メニューから `delete` を選択すると、マイ・アカウントが削除されますか

いいえ。その CDN のみが削除されます。 ご使用のアカウントは引き続き存在し、追加の CDN を作成できます。

## キャッシングには push と pull のどちらが使用されますか

コンテンツ・キャッシングは、_origin pull_ モデルを使用して行われます。 Origin Pull は、手動でコンテンツをエッジ・サーバーにアップロードするのとは対照的に、エッジ・サーバーによってオリジン・サーバーからデータが「プル」されるメソッドです。 

## 存続時間の最大値はありますか。 最小値もありますか。

存続時間の最大値は 2,147,483,647 秒で、これは約 68 年と同等です。 最小値は 30 秒です。

## オリジンと TTL の項目数に制限はありますか

はい。両方を合計した制限は、CDN につき 75 項目です。

## 所有できる CDN の数に制限はありますか

はい。アカウントごとに 10 CDN に制限されます。

## CDN サービスの構成に使用する推奨ブラウザーはありますか

はい。Firefox と Chrome が推奨ブラウザーです。これらのブラウザーの最新バージョンを IBM Cloud コンテンツ配信ネットワークで使用することをお勧めします。

## CDN の作成時にパスを指定する目的は何ですか

CDN の作成時にパスを指定すると、特定のオリジン・サーバーから CDN を介して処理できるファイルを隔離することができます。

## CDN が動作していることは、どのようにすればわかりますか
以下の「curl」コマンドの「origin.cdntesting.net/assets/ibm_3d.gif」を、ご使用のオリジン上のそれぞれのファイル・パスに置き換えて実行します。 
```
curl -I -H "Pragma: akamai-x-cache-on, akamai-x-cache-remote-on, akamai-x-check-cacheable, akamai-x-get-cache-key, akamai-x-get-extracted-values, akamai-x-get-nonces, akamai-x-get-ssl-client-session-id, akamai-x-get-true-cache-key, akamai-x-serial-no" origin.cdntesting.net/assets/ibm_3d.gif
```
コマンドの出力が以下のフォーマットに一致していれば、CDN は予想通りに動作しています。 
```
HTTP/1.1 200 OK

Server: nginx/1.13.0

...

X-Cache: TCP_HIT from a199-117-103-28.deploy.akamaitechnologies.com (AkamaiGHost/9.0.2.1-20488781) (-)

X-Cache-Key: /L/1363/535014/1d/origin.cdntesting.net.ibm.com/assets/ibm_3d.gif

X-True-Cache-Key: /L/origin.cdntesting.net.ibm.com/assets/ibm_3d.gif

...

...

X-Akamai-Session-Info: name=WSD_BEST_PRACTICES_TD_TYPE; value=PATTERNS_BASED_PARENT_MAP

X-Serial: 1363

Connection: keep-alive

X-Check-Cacheable: YES
```

## CDN がエラー状態です。 この後、どうすればよいですか
[「ヘルプとサポートの利用」](https://console.stage1.bluemix.net/docs/infrastructure/CDN/getting-help.html#gettinghelp)ページを参照するか、[カスタマー・ポータル![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://control.softlayer.com/) でチケットをオープンしてください。

## CNAME を指定しなかった場合、どこで見つけることができますか 
CDN をクリックして、ポータルの**「概要」**ページにアクセスします。右隅に、`CName` 情報を含む**「詳細」**セクションが表示されます。

## 一度にアクティブにできるパージ要求の数に制限はありますか
はい。 一度に可能なアクティブ・パージ要求 5 つのみです。

## 特定のファイル・パスでパージ要求が進行中です。 同じファイル・パスに新規要求を送信できますか
いいえ。特定のファイル・パスのアクティブ・パッケージ要求は、一度に 1 つのみ可能です。

## インターネット・プロトコル・バージョン 6 (IPv6) は IBM Cloud コンテンツ配信ネットワーク・サービスでサポートされますか。どのように機能しますか。
IPv6 (または、デュアル・スタック・サポート) は、Akamai のエッジ・サーバーでサポートされています。 これは、IPv4 専用のオリジンをご使用のお客様を支援するように設計されており、IPv6 クライアントからの接続を受け入れ、エッジで IPv6 から IPv4 に変換して、IPv4 を使用するオリジンに転送します。

**注:** IPv6 アドレスをオリジン・サーバー・アドレスとして使用して IBM Cloud CDN を作成することはサポートされていません。

## ホスト名に関するルールは何ですか
`Hostname` 入力ストリングは以下のとおり**でなければなりません**。
  * 英数字で構成される
  * 254 文字未満
  * 有効な最上位ドメイン名で終わる
  * 「cdnedge.bluemix.net」で終わることは**できない** (この終わりは CNAMES に使用され、予約されています)

詳しくは、RFC 1035 のセクション 2.3.4 を参照してください。

## カスタム CNAME の命名規則は何ですか
`CNAME` 入力ストリングは、以下のルールに従う必要があります。
  * 固有**でなければならない** (他の IBM Cloud CDN で使用されていてはいけません)
  * 64 文字未満の英数字
  * 特殊文字 `! @ # $ % ^ & *` は使用**できない**
  * 下線 `_` は使用**できない**
  * ピリオド `.` は使用**できない**
  * ダッシュ `-` は使用できるが、CNAME の先頭と末尾をダッシュにすることはできない

## バケット名に関するルールは何ですか
バケット名:
  * 少なくとも 1 文字でなければならない
  * 長さは 199 文字以下でなければならない
  * 文字 (大文字と小文字の両方を使用できる)、数値、ハイフンを含めることができる
  * IP アドレス (例えば、127.0.0.1) の形式にすることは**できない**
  * ピリオド (.) で始めることは**できない**
  * ピリオド (.) で終わることができる
  * ラベルの間には 1 つのピリオド (.) のみを使用できる (例えば、my..ibmcloud.bucket は使用できません) 

**注**: 大文字とピリオドは検証に合格しますが、常に DNS 準拠のバケット名を使用することをお勧めします。

## オリジンのパス・ストリングに関するルールは何ですか
CDN の作成時にパスはオプションです。ただし、指定する場合、パスは以下のとおり**でなければなりません**。
  * 長さが 1000 文字未満
  * 「/」で始まる

## **Add Origin** コマンドの場合、パス・ストリングに関して従うべきルールはありますか。
**「オリジンの追加 (Add Origin)」**の場合、パスは必須です。 また、CDN がパスを指定して作成された場合、**「オリジンの追加 (Add Origin)」**でのパスは、CDN パスを接頭部として先頭に付ける必要があります。例えば、CDN パスが `/storage` として指定されている場合、`/examplePath` というパスを使用して**「オリジンの追加 (Add Origin)」**を呼び出すには、指定するパスは `/storage/examplePath` となります。

## この CDN サービスでオブジェクト・ストレージのオリジン・タイプを作成する場合、ファイル拡張子はどのような形式で指定する必要がありますか

ファイル拡張子は、コンマ区切りで指定します。 例えば、リスト「txt, jpg, xml」は、有効なリストです。 個々の拡張子は、長さが 10 文字を超えてはなりません。

## Akamai 用に許可される HTTP および HTTPS のポート番号に関して制約事項はありますか。
はい。 Akamai ベンダーの場合、ポート番号 72、80 から 89、443、488、591、777、1080、1088、1111、1443、2080、7001、7070、7612、7777、8000 から 9001、9090、9901 から 9908、11080 から 11110、12900 から 12949、20410、および 45002 のみが許可されます。

## CDN またはオリジン・パスの下のデータへのアクセスには、どのような URL を使用する必要がありますか。 
CDN マッピングまたはオリジンのパスは、ディレクトリーとして扱われます。 したがって、オリジン・パスにアクセスしようとするユーザーは、ディレクトリーとして (スラッシュを付けて) アクセスする必要があります。 例えば、CDN `www.example.com` が `/images` ディレクトリーを含むパスを使用して作成されている場合、その CDN に到達するための URL は `www.example.com/images/` となります。

スラッシュを省いて、例えば `www.example.com/images` を使用すると、**「ページが見つかりません」**エラーになります。

## HTTPS の場合、ホスト名を使用して curl コマンドまたはブラウザーを介して接続できないのはなぜですか。

現在 HTTPS はワイルドカード証明書を通じてのみサポートされています。 この制限の結果として、接続は CNAME を使用して行う必要があります。ホスト名を使用して接続しようとすると、失敗します。

## サポートされる CDN プロトコルを使用するブラウザーで CNAME またはホスト名をロードする際にはどのような動作が予期されますか

|ブラウザー URL| HTTP プロトコルのみを使用する CDN | HTTPS プロトコルのみを使用する CDN | HTTP プロトコルと HTTPS プロトコルの両方を使用する CDN |
|-------|-----|-----|-----|
|http://hostname| ロード成功 | 301 永続的に移動 | 301 永続的に移動 |
|https://hostname | アクセス拒否 | IBM Cloud Web ページにリダイレクト | IBM Cloud Web ページにリダイレクト | 
|http://cname| 301 永続的に移動 | アクセス拒否 | ロード成功 | 
|https://cname| IBM Cloud Web ページにリダイレクト | ロード成功 | ロード成功 |

## IBM Cloud Object Storage (COS) のコンテンツ配信ネットワークはどのようにしてセットアップしますか
IBM Cloud Object Storage 用にコンテンツ配信ネットワークを作成する場合の[チュートリアル](https://console.bluemix.net/docs/tutorials/static-files-cdn.html#accelerate-delivery-of-static-files-using-a-cdn)があります。

## IBM Cloud Object Storage (COS) をオリジンとして選択した場合にブラウザーにホスト名がロードされないのはなぜですか

IBM COS をオブジェクト・ストレージとして使用するように IBM Cloud CDN を構成した場合、Web サイトへの直接アクセスは機能しません。ブラウザーのアドレス・バーに完全な要求パス (例えば、`www.example.com/index.html`) を指定する必要があります。この動作は、IBM COS での索引文書の制限によって発生します。

## Akamai CDN から配信できる最大ファイル・サイズは

1.8 GB より大きいファイルを取得したり配信したりしようとすると、デフォルトのパフォーマンス構成では`「403 アクセス禁止」`応答が表示されます。ラージ・ファイルの最適化が有効になっている場合、320 GB までのファイル・ダウンロードが可能です。

## オリジン証明書の有効期限が切れるという通知を受信しました。この後、どうすればよいですか

Akamai の[記事](https://community.akamai.com/docs/DOC-7708)で概説されているステップに従ってください。

## バイト範囲要求とは何ですか。また、これは Akamai CDN ではどのように動作しますか

バイト範囲要求は、オリジン・サーバーから部分的コンテンツを取得するために使用されます。Range HTTP 要求ヘッダーは、サーバーが返すコンテンツの部分を示します。複数の部分を一度に 1 つの範囲ヘッダーで要求でき、サーバーは、これらの範囲を複数パーツ応答で返送することがあります。サーバーは範囲を返送する場合、206 (部分的コンテンツ) 状況で応答します。

IBM Cloud CDN with Akamai を使用してバイト範囲要求が送信された場合、ユーザーは、最初の要求では 200 (OK) 応答コードを受け取り、後続のすべての要求では 206 応答コードを受け取ることがあります。これは、Akamai エッジ・サーバーが、オリジンからのコンテンツを圧縮フォーマットで要求するためです。そのため、エッジ・サーバーのキャッシュ内にオブジェクトが存在せず、オブジェクトのコンテンツ長に関する情報もない場合、オリジンに進み、オブジェクト全体を要求します。この場合、オリジンはコンテンツ長ヘッダーなしでオブジェクトを Akamai に提供し、エンド・ユーザーには、これがバイト範囲要求であってもオブジェクト全体が提供されます。そのため、200 状況コードが表示されます。後続の要求では、エッジ・サーバーのキャッシュ内にはオブジェクトがあるため、206 状況コードが提供されます。

最初のバイト範囲要求であっても確実に 206 応答が返されるようにする 1 つの方法は、オリジン・サーバーで `Transfer-Encoding: chunked` を無効にすることです。

## Akamai を使用する IBM CDN ソリューションにはどのセキュリティーが組み込まれていますか

Akamai 分散プラットフォームを使用すると、130 カ国以上に 240,000 を超えるサーバーを展開するという無比のスケーリングと回復力を実現できます。Akamai Platform は、インフラストラクチャーとエンド・ユーザーの間に介在し、トラフィックの急増に対する第 1 レベルの防御の役割を果たします。また、Akamai Intelligent Platform は、ポート 80 と 443 でのみ要求を listen して応答するリバース・プロキシーです。これは、他のポートでのトラフィックは、インフラストラクチャーに転送されずにエッジでドロップされることを意味します。
